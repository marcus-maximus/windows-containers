# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
- master

pool:
  vmImage: 'win1803'

steps:
- pwsh: |
    cd buildtools
    docker build -t marcusmaximus/msvc-buildtools:2019 .
  displayName: 'Build docker image'
- pwsh:
    $(dockerhub_password) | docker login --username $(dockerhub_password) --password-stdin
  #env: 
    #DOCKER_HUB_USER: $(dockerhub_user)
    #DOCKER_HUB_PASSWORD: $(dockerhub_password)
  displayName: 'Push image to docker hub'